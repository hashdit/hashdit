"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8838],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(a),p=r,m=u["".concat(l,".").concat(p)]||u[p]||h[p]||i;return a?n.createElement(m,o(o({ref:t},d),{},{components:a})):n.createElement(m,o({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},48063:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var n=a(87462),r=(a(67294),a(3905));const i={},o="Guardian Strategy",s={unversionedId:"transaction-prevention/guardian-strategy",id:"transaction-prevention/guardian-strategy",title:"Guardian Strategy",description:"Introduction",source:"@site/docs/transaction-prevention/guardian-strategy.md",sourceDirName:"transaction-prevention",slug:"/transaction-prevention/guardian-strategy",permalink:"/hashdit/docs/transaction-prevention/guardian-strategy",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Web3 Transaction Prevention Solution",permalink:"/hashdit/docs/category/web3-transaction-prevention-solution"},next:{title:"Introduction",permalink:"/hashdit/docs/transaction-prevention/introduction"}},l={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Integration",id:"integration",level:2},{value:"Advantages &amp; Limitations",id:"advantages--limitations",level:2},{value:"Advantages",id:"advantages",level:3},{value:"Limitations",id:"limitations",level:3},{value:"Real-world Use Case Example",id:"real-world-use-case-example",level:2}],d={toc:c};function u(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"guardian-strategy"},"Guardian Strategy"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The Guardian strategy is an upgraded version of the Timelock strategy. Similarly to the Timelock strategy, the Guardian strategy is also suitable for some basic transfer scenarios, such as the withdrawal from the staking contract, the transfer of the token contract, the deposit into the farm contract, etc. However, it's incompatible for more complex scenarios such as token swaps."),(0,r.kt)("p",null,"The basic assumption of the Guardian strategy is that when a user calls the project contract to transfer money, if the involved fund size exceeds the project team's pre-set threshold, the funds will be automatically transferred to the Guardian contract and a TransferFunds event will be triggered. The HashDit backend will monitor this event in real time and give a security risk rating for the transaction, and if the security risk is considered low, it will call the exitFundsProtect function of the Guardian contract to unfreeze the funds. Otherwise, the funds will remain in the Guardian contract, and the project team has the right to dispose of the funds in any way."),(0,r.kt)("p",null,"The following two diagrams illustrate the different execution processes between normal transactions and malicious transactions."),(0,r.kt)("p",null,"For Normal Transaction:"),(0,r.kt)("p",null,(0,r.kt)("img",{src:a(50247).Z,width:"624",height:"79"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 1: The user initiates a fund withdrawal by submitting a transaction to the project smart contract."),(0,r.kt)("li",{parentName:"ul"},"Step 2: The project contract connects and deposits the fund into the security guardian contract."),(0,r.kt)("li",{parentName:"ul"},"Step 3: Upon trigger by the TransferFunds event, the guardian contract query the Hashdit to verify the integrity of the accounts involved and get their risk level."),(0,r.kt)("li",{parentName:"ul"},"Step 4: Because the risk level is low, then the guardian contract approves the fund to the project contract to fulfill the transaction.\xa0"),(0,r.kt)("li",{parentName:"ul"},"Step 5: The project contract will approve the withdrawal.")),(0,r.kt)("p",null,"For Malicious Transaction:"),(0,r.kt)("p",null,(0,r.kt)("img",{src:a(67728).Z,width:"624",height:"87"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 1: The hacker initiates a fund withdrawal by submitting a transaction to the project smart contract."),(0,r.kt)("li",{parentName:"ul"},"Step 2: The project contract connects and deposits the fund into the security guardian contract."),(0,r.kt)("li",{parentName:"ul"},"Step 3: Upon trigger by the transfer event, the guardian contract query the Hashdit to verify the integrity of the accounts involved and get their risk level."),(0,r.kt)("li",{parentName:"ul"},"Step 4: Because the risk level is deemed high risk, then the fund will be stored in the guardian contract and never return back to the original contract."),(0,r.kt)("li",{parentName:"ul"},"Step 5: The project contract will reject the withdrawal.")),(0,r.kt)("h2",{id:"integration"},"Integration"),(0,r.kt)("p",null,"The integration process is not complex; all it requires is using our SDK to incorporate the invocation logic from the fund saver related functions in the Guardian smart contract into the project's smart contract."),(0,r.kt)("h2",{id:"advantages--limitations"},"Advantages & Limitations"),(0,r.kt)("h3",{id:"advantages"},"Advantages"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Compared to the Timelock strategy, essentially, the transfer or withdrawal of funds can be completed in the subsequent block, similar to having an extremely short timelock. This minimizes any discomfort for regular users."),(0,r.kt)("li",{parentName:"ol"},"Deployment is straightforward. As long as clients integrate and utilize our SDK in their projects, they can achieve fund protection."),(0,r.kt)("li",{parentName:"ol"},"Our monitoring backend is a lightweight event-monitoring module, filtering out many irrelevant on-chain data, ensuring high efficiency.")),(0,r.kt)("h3",{id:"limitations"},"Limitations"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"This strategy is only suitable for simple and direct transfer logic, and is not suitable for more complex fund transfer scenarios such as swap tokens.\xa0"),(0,r.kt)("li",{parentName:"ol"},"\xa0It's impossible to execute all operations within a single transaction; it requires at least two separate transactions."),(0,r.kt)("li",{parentName:"ol"},"The accuracy of risk assessment derives from HashDit, which could lead to potential false positives or false negatives.")),(0,r.kt)("h2",{id:"real-world-use-case-example"},"Real-world Use Case Example"),(0,r.kt)("p",null,"Take the real-world example of Merlin Lab hacking incident. The yield aggregator, Merlin Lab, was hacked due to a logical flaw present in MerlinStrategyAlpacaBNB. The contract mistakenly treated the BNB transferred by the yielder as mining earnings, causing the contract to mint more MERL as rewards. Through repeated operations, the hacker made a profit of $300,000.\nThis hacking incident could have been intercepted by our Guardian strategy. When a hacker tries to profit multiple times by exploiting a logical loophole, the transferred amount triggers the threshold, and the hacked funds would enter a fund protection program. As the hacker's address hits the blacklist, the funds would be retained in the Guardian contract. Any attempts by the hacker to withdraw profits would be nonviable, and the right to manage funds would solely lie with the project's team.\nGuardian strategy can effectively intercept such simple transfer scenario hacks, regardless of how complex the contract vulnerabilities exploited in the attack method are. Furthermore, it minimizes the impact on normal user operations."))}u.isMDXComponent=!0},50247:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/4-9a3d67566019edcef5c81594cf11a19e.png"},67728:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/5-b31ed63da73904a44c67b60d65db76fd.png"}}]);